<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Traductor de Alarmas</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 50px;
    }
    textarea, button, select {
      padding: 10px;
      font-size: 16px;
      width: 100%;
      margin-top: 10px;
    }
    #resultado, #historial {
      margin-top: 20px;
      font-weight: bold;
      white-space: pre-wrap;
    }
    #historial div {
      border-top: 1px solid #ccc;
      padding: 5px 0;
    }
  </style>
</head>
<body>
  <h1>Traductor de Alarmas</h1>
  <textarea id="alarmaInput" rows="10" placeholder="Pegue aquí la línea completa con campos separados por tabulación"></textarea>
  <select id="afectacion">
    <option value="Indisponibilidad">Indisponibilidad</option>
    <option value="Degradación">Degradación</option>
    <option value="Potencial">Potencial</option>
  </select>
  <select id="grupo">
    <option value="VOZMOVIL">VOZMOVIL</option>
    <option value="ROAMING">ROAMING</option>
    <option value="VOZFIJA">VOZFIJA</option>
  </select>
  <button onclick="procesarAlarma()">Generar descripción</button>
  <div id="resultado"></div>
  <h2>Historial de Consultas</h2>
  <div id="historial"></div>

  <script>
    const alarmas = {
      "etcd Backup Failed": "Falla en el respaldo de la base de datos distribuida etcd.",
      "Disk Usage High": "El uso del disco está por encima del umbral.",
      "CPU Load High": "Alta carga de CPU detectada.",
      "Link Down": "Se detectó que un enlace de red está caído.",
      "Memory Utilization Critical": "Utilización de memoria en nivel crítico.",
      "hwIfMonitorCrcErrorRising": "Interfaz con errores."
    };

    function procesarAlarma() {
      const entrada = document.getElementById("alarmaInput").value;
      const campos = entrada.split('\t');
      const node = campos[52] || "Nodo vacía o errónea";
      const alarmaOriginal = campos[53] || "Alarma vacía o errónea";
      const alerta = alarmas[alarmaOriginal] || alarmaOriginal;
      const afectacion = document.getElementById("afectacion").value;
      const grupo = document.getElementById("grupo").value;

      const descripcion = `NOC-MO | ${node} | ${alerta} | ${afectacion} | ${grupo}`;
      document.getElementById("resultado").innerText = descripcion;

      const historial = document.getElementById("historial");
      const entradaHistorial = document.createElement("div");
      entradaHistorial.innerText = `Consulta: ${alarmaOriginal}\nResultado: ${descripcion}`;
      historial.prepend(entradaHistorial);
    }
  </script>
</body>
</html>
